
@page "/forgot-password"


<PageTitle>Forgot Password - Soccer League</PageTitle>

<RadzenStack Gap="2rem" Class="rz-p-4 rz-p-md-12" Style="height: 100vh;"
             AlignItems="AlignItems.Center" JustifyContent="JustifyContent.Center">

    <RadzenCard Style="max-width: 500px; width: 100%;" Class="rz-shadow-10">
        <RadzenStack Gap="1.5rem">

            <!-- Header -->
            <RadzenStack AlignItems="AlignItems.Center" Gap="0.5rem">
                <RadzenIcon Icon="lock_reset" Style="font-size: 4rem; color: var(--rz-primary);" />
                <RadzenText TextStyle="TextStyle.H4" TagName="TagName.H1"
                            Class="rz-mb-0">
                    Reset Password
                </RadzenText>
                <RadzenText TextStyle="TextStyle.Body2" Class="rz-color-secondary"
                            Style="text-align: center;">
                    Enter your email address and we'll send you a link to reset your password.
                </RadzenText>
            </RadzenStack>

            @if (!emailSent)
            {
                <!-- Forgot Password Form -->
                <RadzenTemplateForm TItem="ForgotPasswordRequest" Data="@request" Submit="@HandleSubmit">
                    <RadzenStack Gap="1rem">

                        <RadzenFormField Text="Email Address" Variant="Variant.Outlined">
                            <RadzenTextBox @bind-Value="@request.Email"
                                           Name="Email"
                                           Placeholder="Enter your email"
                                           Style="width: 100%;"
                                           aria-label="Email Address" />
                            <RadzenRequiredValidator Component="Email"
                                                     Text="Email is required" />
                            <RadzenEmailValidator Component="Email"
                                                  Text="Invalid email format" />
                        </RadzenFormField>

                        <RadzenButton ButtonType="ButtonType.Submit"
                                      Text="Send Reset Link"
                                      Icon="send"
                                      IsBusy="@isLoading"
                                      BusyText="Sending..."
                                      Style="width: 100%;"
                                      Size="ButtonSize.Large"
                                      ButtonStyle="ButtonStyle.Primary" />

                        <RadzenStack Orientation="Orientation.Horizontal"
                                     AlignItems="AlignItems.Center"
                                     JustifyContent="JustifyContent.Center"
                                     Gap="0.5rem">
                            <RadzenLink Path="/login"
                                        Text="Back to Sign In"
                                        Icon="arrow_back" />
                        </RadzenStack>

                    </RadzenStack>
                </RadzenTemplateForm>
            }
            else
            {
                <!-- Success Message -->
                <RadzenAlert AlertStyle="AlertStyle.Success" Variant="Variant.Flat">
                    <RadzenStack Gap="1rem">
                        <RadzenText TextStyle="TextStyle.Body1">
                            If an account exists with that email, we've sent a password reset link.
                        </RadzenText>
                        <RadzenText TextStyle="TextStyle.Body2">
                            Please check your email and follow the instructions to reset your password.
                        </RadzenText>
                    </RadzenStack>
                </RadzenAlert>

                <RadzenButton Text="Back to Sign In"
                              Icon="login"
                              ButtonStyle="ButtonStyle.Primary"
                              Style="width: 100%;"
                              Click="@(() => Navigation.NavigateTo("/login"))" />
            }

        </RadzenStack>
    </RadzenCard>

</RadzenStack>

